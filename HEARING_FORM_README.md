# 契約前の事前ヒアリングフォーム - スライダー式 + 見積もり自動計算

## 📋 概要

このWordPressテーマには**スライダー式(ステップフォーム)の事前ヒアリングフォーム**と**見積もり自動計算機能**が完全統合されています。

**テーマをWordPressにインストールするだけで、すぐに使用できます。追加の設定は不要です。**

### 主な特徴

- **スライダー式フォーム**: 5つのステップに分けて入力、進捗バーで現在位置を表示
- **見積もり自動計算**: 入力内容に応じてリアルタイムで見積もり金額を表示
- **機能性の高さをアピール**: 洗練されたUIで制作会社の技術力を訴求
- **レスポンシブ対応**: スマートフォンからPCまで最適な表示
- **メール送信機能**: 管理者メールアドレスに自動送信

---

## 🚀 使い方(2ステップ)

### ステップ1: テーマのインストールと有効化

#### 方法A: GitHubからクローン

```bash
cd /path/to/wordpress/wp-content/themes/
git clone https://github.com/kuuhaku1102/infinity-lp.git
```

#### 方法B: WordPress管理画面からアップロード

1. リポジトリをZIPファイルとしてダウンロード
2. WordPress管理画面「外観」→「テーマ」→「新規追加」→「テーマのアップロード」
3. ZIPファイルを選択してアップロード

#### テーマの有効化

WordPress管理画面から「外観」→「テーマ」で「Infinity Design LP」を有効化

**これだけで、フォーム機能を含むすべての機能が使用可能になります。**

---

### ステップ2: ショートコードを配置

#### front-page.phpに追加する場合

`front-page.php` の任意の位置に以下のコードを追加します。

```php
<?php echo do_shortcode('[hearing_form]'); ?>
```

#### 固定ページに追加する場合

WordPress管理画面から固定ページを編集し、以下のショートコードを挿入します。

```
[hearing_form]
```

---

## 🎯 スライダー式フォームの構成

### ステップ1: 基本情報
- 会社名もしくは個人名(必須)
- 重視する箇所(クオリティー/コスト/速さ)

### ステップ2: 制作内容
- テキストのご準備(必須) - **なしの場合 +5万円**
- 素材の有無(必須)
- LPの内容(必須)

### ステップ3: 機能要件
- 機能実装のご希望(必須) - **ありの場合 +5万円**
- 希望する機能の詳細(任意)
- 想定するCMS(必須) - **「不明」以外の場合 +5万円**
- フォーム実装(必須) - **ありの場合 +2万円**

### ステップ4: スケジュール・予算 + 見積もり表示
- 希望納期(必須) - **1ヶ月以内の場合 +7万円(特急料金)**
- **お見積もり表示**: リアルタイムで計算された見積もりを表示

### ステップ5: 確認・送信
- 入力内容の確認
- 最終見積もりの表示
- 送信ボタン

---

## 💰 見積もり計算ロジック

| 項目 | 料金 |
|------|------|
| **基本料金** | ¥100,000 |
| テキスト準備なし | +¥50,000 |
| 機能実装あり | +¥50,000 |
| CMS導入(「不明」以外) | +¥50,000 |
| フォーム実装あり | +¥20,000 |
| 納期1ヶ月以内(特急料金) | +¥70,000 |

**例**: テキストなし + 機能実装あり + WordPress + フォームあり + 1ヶ月以内納期  
= 10万円 + 5万円 + 5万円 + 5万円 + 2万円 + 7万円 = **34万円**

---

## 🗂️ ファイル構成

```
infinity-lp/
├── functions.php                           # テーマ機能(フォーム機能を自動読み込み)
├── inc/
│   └── hearing-form.php                    # フォーム機能 + JavaScript読み込み
├── template-parts/
│   └── hearing-form-template.php           # スライダー式フォームHTML
├── js/
│   └── hearing-form-slider.js              # スライダー制御 + 見積もり計算
├── css/
│   └── style.css                           # コンパイル済みスタイル
├── sass/
│   ├── _hearing-form.scss                  # フォーム専用スタイル
│   └── style.scss                          # メインSCSS
└── HEARING_FORM_README.md                  # このファイル
```

### ファイルの役割

| ファイル | 役割 | 編集頻度 |
|---------|------|---------|
| `functions.php` | テーマ全体の機能を管理 | 低 |
| `inc/hearing-form.php` | ショートコード登録、JavaScript読み込み、メール送信 | 低 |
| `template-parts/hearing-form-template.php` | フォームのHTMLマークアップ | **高** |
| `js/hearing-form-slider.js` | スライダー制御、見積もり計算ロジック | **中** |
| `sass/_hearing-form.scss` | フォームのデザイン・スタイル | **高** |
| `css/style.css` | コンパイル済みCSS(自動生成) | - |

---

## ✏️ カスタマイズ方法

### 見積もり料金の変更

**ファイル**: `js/hearing-form-slider.js`

```javascript
// 料金設定
const PRICING = {
    base: 100000,              // 基本料金: 10万円
    textReady: 50000,          // テキスト準備なし: +5万円
    specReady: 50000,          // 機能実装あり: +5万円
    cms: 50000,                // CMS導入: +5万円
    formImplementation: 20000, // フォーム実装あり: +2万円
    urgentDelivery: 70000      // 納期1ヶ月以内: +7万円
};
```

この部分の数値を変更するだけで、見積もり計算が自動的に更新されます。

---

### フォームフィールドの編集

**ファイル**: `template-parts/hearing-form-template.php`

新しいフィールドを追加する場合は、HTMLを追加し、`js/hearing-form-slider.js`の`displayConfirmation`関数にもラベルを追加してください。

---

### デザインのカスタマイズ

**ファイル**: `sass/_hearing-form.scss`

#### 主要な変更ポイント

| 変更内容 | 該当クラス | 例 |
|---------|-----------|---|
| メインカラーの変更 | `.hearing-form__title`, `.hearing-form__button` など | `#e74c3c` を別の色に変更 |
| 進捗バーの色 | `.hearing-form__progress-bar` | グラデーションを変更 |
| ボタンサイズの変更 | `.hearing-form__button` | `padding`, `font-size` を調整 |

**SCSSのコンパイル**:

```bash
sass sass/style.scss css/style.css --style=compressed
```

---

## 📧 メール送信設定

### 送信先の変更

**ファイル**: `inc/hearing-form.php`

```php
function hearing_form_send_email($data) {
    // 固定のメールアドレスに変更する場合
    $admin_email = 'info@example.com'; // ここを変更
    
    // ... 以下省略 ...
}
```

---

## 🧪 動作確認

### チェックリスト

- [ ] テーマが正しくインストール・有効化されている
- [ ] フォームが正しく表示される
- [ ] 進捗バーが動作する
- [ ] 「次へ」「戻る」ボタンでステップ移動できる
- [ ] 見積もりが正しく計算される
- [ ] ステップ5で入力内容が確認できる
- [ ] 送信後に成功メッセージが表示される
- [ ] 管理者メールアドレスにメールが届く
- [ ] スマートフォンで表示が崩れない

---

## 🔧 トラブルシューティング

### 見積もりが計算されない

**原因**: JavaScriptが読み込まれていない

**解決策**:
1. ブラウザの開発者ツール(F12)でコンソールエラーを確認
2. `js/hearing-form-slider.js`が正しく配置されているか確認
3. ブラウザのキャッシュをクリア

### スライダーが動作しない

**原因**: JavaScriptエラー

**解決策**:
1. ブラウザの開発者ツールでエラーを確認
2. 他のプラグインとの競合を確認(プラグインを一時的に無効化)

### スタイルが反映されない

**原因**: CSSファイルが更新されていない

**解決策**:
1. `css/style.css`が最新版か確認
2. SCSSを再コンパイル
3. ブラウザのキャッシュをクリア

---

## 🎨 デザインの特徴

- **機能性の高さをアピール**: スライダー式フォームで制作会社の技術力を訴求
- **リアルタイム見積もり**: 入力内容に応じて即座に見積もりを表示
- **洗練されたUI**: プロフェッショナルな印象と使いやすさを両立
- **メインカラー**: 赤系(#e74c3c)を使用し、既存サイトとの統一感を確保
- **アニメーション**: スムーズな画面遷移とホバーエフェクト
- **レスポンシブ対応**: スマートフォンからPCまで最適な表示

---

## 📝 補足情報

### セキュリティ対策

- **Nonce検証**: フォーム送信時にWordPressのnonce機能で検証
- **データサニタイズ**: すべての入力値を適切にサニタイズ
- **エスケープ処理**: 出力時にエスケープ処理を実施

### レスポンシブ対応

フォームは以下のブレークポイントでレスポンシブ対応しています。

- モバイル: 〜800px
- タブレット・PC: 801px〜

### ブラウザ対応

- Chrome(最新版)
- Firefox(最新版)
- Safari(最新版)
- Edge(最新版)

---

## 🔗 GitHubリポジトリ

https://github.com/kuuhaku1102/infinity-lp

---

**作成日**: 2026年1月28日  
**バージョン**: 2.0.0 (スライダー式 + 見積もり自動計算)
